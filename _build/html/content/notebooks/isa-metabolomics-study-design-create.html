
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title> &#8212; The ISA cookbook</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mermaid.js"></script>
    <script src="../../_static/mermaid.min.js"></script>
    <script src="../../_static/mermaid.core.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://proccaserra.github.io/isa-cookbook/content/notebooks/isa-metabolomics-study-design-create.html" />
    <link rel="shortcut icon" href="../../_static/isa.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Create ISA-API Investigation from Datascriptor Study Design configuration" href="investigation-from-datascriptor-config-observational-variables-and-ontology-annotation.html" />
    <link rel="prev" title="Light Sensitivity Experiment:" href="light-sensitity-study-repeated-treatment-design.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://proccaserra.github.io/isa-cookbook/content/notebooks/isa-metabolomics-study-design-create.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="The ISA cookbook" />
<meta property="og:description" content="  Abstract:  In this notebook, we’ll show how to generate an ISA-Tab and an ISA JSON representation of a metabolomics study. The study uses GC-MS and 13C NMR on" />
<meta property="og:image"       content="https://proccaserra.github.io/isa-cookbook/_static/isa_footer_logo.svg" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/isa_footer_logo.svg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">The ISA cookbook</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   ISA tools API
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../installation.html">
   ISA-API Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../isamodel.html">
   ISA data model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reading.html">
   Reading in ISA-Tab or ISA JSON
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../validation.html">
   Validating ISA-Tab and ISA JSON
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../creation.html">
   Creating ISA content
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../importdata.html">
   Importing data into ISA formats
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exportdata.html">
   Exporting data from ISA formats
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../conversions.html">
   Converting between ISA format
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../examples.html">
   Example programs using the ISA API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../github.html">
   Downloading files stored in Github
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../knownissues.html">
   Known issues
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../creationtutorial.html">
   Tutorial: describing a simple experiment
  </a>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="../notebooks.html">
   Hands-on Practicals
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="reading-isa-tab-from-disk-exploring-and-validating.html">
     Reading ISA-Tab from files and Validating ISA-Tab files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="create-a-simple-ISA-descriptor.html">
     Create a simple ISA descriptor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="create_2x2x2_factorial_design.html">
     Create an ISA Study representing a 2x2x2 factorial design with single measurements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="create-a-repeated-treatment-design-with-ISA-descriptor.html">
     Create a repeated treatment design with ISA descriptor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="isa-protocol-type-synonym-effect-on-assay-table.html">
     ISA-API built-in semantic requirements for
     <code class="docutils literal notranslate">
      <span class="pre">
       protocol
      </span>
      <span class="pre">
       type
      </span>
     </code>
     values
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="light-sensitity-study-repeated-treatment-design.html">
     Light Sensitivity Experiment:
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="investigation-from-datascriptor-config-observational-variables-and-ontology-annotation.html">
     Create ISA-API Investigation from Datascriptor Study Design configuration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="isa-tab-unused-sources-not-serialized-brapi.html">
     Known Issue: unused ISA Source aren’t serialized to ISA-Tab
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/notebooks/isa-metabolomics-study-design-create.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/proccaserra/isa-cookbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/proccaserra/isa-cookbook/issues/new?title=Issue%20on%20page%20%2Fcontent/notebooks/isa-metabolomics-study-design-create.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/proccaserra/isa-cookbook/edit/main/content/notebooks/isa-metabolomics-study-design-create.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/proccaserra/isa-cookbook/main?urlpath=lab/tree/content/notebooks/isa-metabolomics-study-design-create.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/proccaserra/isa-cookbook/blob/main/content/notebooks/isa-metabolomics-study-design-create.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#abstract">
   Abstract:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-isa-api-model-and-relevant-library">
     1. Loading ISA-API model and relevant library
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-variables">
     2. Setting variables:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#declaration-of-isa-sample-biomaterial-templates-for-liver-blood-and-heart">
     3. Declaration of ISA Sample / Biomaterial templates for liver, blood and heart
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#declaration-of-isa-assay-templates-as-python-ordereddict">
     4. Declaration of ISA Assay templates as Python
     <code class="docutils literal notranslate">
      <span class="pre">
       OrderedDict
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion:
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#about-this-notebook">
   About this notebook
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="abstract">
<h2>Abstract:<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>In this notebook, we’ll show how to generate an ISA-Tab and an ISA JSON representation of a metabolomics study.
The study uses GC-MS and 13C NMR on 3 distinct sample types (liver, blood and heart) collected from study subjects assigned to 3 distinct study arms.</p>
<p>GC-MS acquisition were carried out in duplicate, extracts were derivatized using BSA and acquired on an Agilent QTOF in both positive and negative modes.
13C NMR free induction decays were acquired on a Bruker Avance, using CPMG and PSEQ pulse sequences in duplicates.</p>
<div class="section" id="loading-isa-api-model-and-relevant-library">
<h3>1. Loading ISA-API model and relevant library<a class="headerlink" href="#loading-isa-api-model-and-relevant-library" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">isatools.model</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">isatools.create.model</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">isatools</span> <span class="kn">import</span> <span class="n">isatab</span>
<span class="kn">from</span> <span class="nn">isatools</span> <span class="kn">import</span> <span class="n">isajson</span>
<span class="kn">from</span> <span class="nn">isatools.isajson</span> <span class="kn">import</span> <span class="n">ISAJSONEncoder</span>
<span class="kn">from</span> <span class="nn">isatools.model</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Investigation</span><span class="p">,</span> <span class="n">Study</span><span class="p">,</span> <span class="n">Assay</span><span class="p">,</span> <span class="n">Person</span><span class="p">,</span> <span class="n">Material</span><span class="p">,</span>
                            <span class="n">DataFile</span><span class="p">,</span> <span class="n">plink</span><span class="p">,</span>
                            <span class="n">OntologySource</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">,</span> <span class="n">Sample</span><span class="p">,</span>
                            <span class="n">Source</span><span class="p">,</span> <span class="n">Characteristic</span><span class="p">,</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">Process</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">isatools.isatab</span> <span class="kn">import</span> <span class="n">dump_tables_to_dataframes</span> <span class="k">as</span> <span class="n">dumpdf</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="setting-variables">
<h3>2. Setting variables:<a class="headerlink" href="#setting-variables" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NAME</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span>
<span class="n">FACTORS_0_VALUE</span> <span class="o">=</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;nitroglycerin&#39;</span><span class="p">)</span>
<span class="n">FACTORS_0_VALUE_ALT</span> <span class="o">=</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;alcohol&#39;</span><span class="p">)</span>
<span class="n">FACTORS_0_VALUE_THIRD</span> <span class="o">=</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;water&#39;</span><span class="p">)</span>

<span class="n">FACTORS_1_VALUE</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">FACTORS_1_UNIT</span> <span class="o">=</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;kg/m^3&#39;</span><span class="p">)</span>

<span class="n">FACTORS_2_VALUE</span> <span class="o">=</span> <span class="mf">100.0</span>
<span class="n">FACTORS_2_VALUE_ALT</span> <span class="o">=</span> <span class="mf">50.0</span>
<span class="n">FACTORS_2_UNIT</span> <span class="o">=</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>

<span class="n">TEST_EPOCH_0_NAME</span> <span class="o">=</span> <span class="s1">&#39;test epoch 0&#39;</span>
<span class="n">TEST_EPOCH_1_NAME</span> <span class="o">=</span> <span class="s1">&#39;test epoch 1&#39;</span>
<span class="n">TEST_EPOCH_2_NAME</span> <span class="o">=</span> <span class="s1">&#39;test epoch 2&#39;</span>

<span class="n">TEST_STUDY_ARM_NAME_00</span> <span class="o">=</span> <span class="s1">&#39;test arm&#39;</span>
<span class="n">TEST_STUDY_ARM_NAME_01</span> <span class="o">=</span> <span class="s1">&#39;another arm&#39;</span>
<span class="n">TEST_STUDY_ARM_NAME_02</span> <span class="o">=</span> <span class="s1">&#39;yet another arm&#39;</span>

<span class="n">TEST_STUDY_DESIGN_NAME</span> <span class="o">=</span> <span class="s1">&#39;test study design&#39;</span>

<span class="n">TEST_EPOCH_0_RANK</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">SCREEN_DURATION_VALUE</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">FOLLOW_UP_DURATION_VALUE</span> <span class="o">=</span> <span class="mi">5</span><span class="o">*</span><span class="mi">366</span>
<span class="n">WASHOUT_DURATION_VALUE</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">DURATION_UNIT</span> <span class="o">=</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;day&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="declaration-of-isa-sample-biomaterial-templates-for-liver-blood-and-heart">
<h3>3. Declaration of ISA Sample / Biomaterial templates for liver, blood and heart<a class="headerlink" href="#declaration-of-isa-sample-biomaterial-templates-for-liver-blood-and-heart" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">SAMPLE</span><span class="p">,</span>
            <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;organism part&#39;</span><span class="p">),</span>
            <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;liver&#39;</span><span class="p">),</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">SAMPLE</span><span class="p">,</span>
            <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;organism part&#39;</span><span class="p">),</span>
            <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;blood&#39;</span><span class="p">),</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">SAMPLE</span><span class="p">,</span>
            <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;organism part&#39;</span><span class="p">),</span>
            <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;heart&#39;</span><span class="p">),</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="declaration-of-isa-assay-templates-as-python-ordereddict">
<h3>4. Declaration of ISA Assay templates as Python <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code><a class="headerlink" href="#declaration-of-isa-assay-templates-as-python-ordereddict" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># A Mass Spectrometry based metabolite profiling assay</span>

<span class="n">ms_assay_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;measurement_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;metabolite profiling&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;technology_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;mass spectrometry&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;extraction&#39;</span><span class="p">,</span> <span class="p">{}),</span>
    <span class="p">(</span><span class="s1">&#39;extract&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
            <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
            <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;polar fraction&#39;</span><span class="p">),</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
            <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
            <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;lipids&#39;</span><span class="p">),</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
    <span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;derivatization&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;#replicates&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;derivatization&#39;</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;sylalation&#39;</span><span class="p">],</span>
        <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;derivatization&#39;</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;bis(trimethylsilyl)acetamide&#39;</span><span class="p">],</span>
    <span class="p">}),</span>
    <span class="p">(</span><span class="s1">&#39;labeled extract&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">LABELED_EXTRACT</span><span class="p">,</span>
            <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;labeled extract type&#39;</span><span class="p">),</span>
            <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
    <span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;mass spectrometry&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;#replicates&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;instrument&#39;</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;Agilent QTOF&#39;</span><span class="p">],</span>
        <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;injection_mode&#39;</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;GC&#39;</span><span class="p">],</span>
        <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;positive mode&#39;</span><span class="p">,</span><span class="s1">&#39;negative mode&#39;</span><span class="p">]</span>
    <span class="p">}),</span>
    <span class="p">(</span><span class="s1">&#39;raw spectral data file&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">DATA_FILE</span><span class="p">,</span>
            <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">])</span>
<span class="p">])</span>


<span class="c1"># A high-throughput phenotyping imaging based phenotyping assay</span>

<span class="n">phti_assay_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;measurement_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;phenotyping&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;technology_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;high-throughput imaging&#39;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;extraction&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="p">(</span><span class="s1">&#39;extract&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
                    <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;supernatant&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
                    <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;pellet&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">}</span>
            <span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;phenotyping by high throughput imaging&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="s1">&#39;OntologyAnnotation(term=instrument)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;lemnatech gigant&#39;</span><span class="p">],</span>
                <span class="s1">&#39;OntologyAnnotation(term=acquisition_mode)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;UV light&#39;</span><span class="p">,</span><span class="s1">&#39;near-IR light&#39;</span><span class="p">,</span><span class="s1">&#39;far-IR light&#39;</span><span class="p">,</span><span class="s1">&#39;visible light&#39;</span><span class="p">],</span>
                <span class="s1">&#39;OntologyAnnotation(term=camera position)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span><span class="s1">&#39;120 degree&#39;</span><span class="p">,</span><span class="s1">&#39;240 degree&#39;</span><span class="p">,</span><span class="s1">&#39;360 degree&#39;</span><span class="p">],</span>
                <span class="s1">&#39;OntologyAnnotation(term=imaging daily schedule)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;06.00&#39;</span><span class="p">,</span><span class="s1">&#39;19.00&#39;</span><span class="p">]</span>
            <span class="p">}),</span>
            <span class="p">(</span><span class="s1">&#39;raw_spectral_data_file&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">DATA_FILE</span><span class="p">,</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">}</span>
            <span class="p">])</span>
        <span class="p">])</span>

<span class="c1"># A liquid chromatography diode-array based metabolite profiling assay</span>

<span class="n">lcdad_assay_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;measurement_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;metabolite identification&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;technology_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;liquid chromatography diode-array detector&#39;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;extraction&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="p">(</span><span class="s1">&#39;extract&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
                    <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;supernatant&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
                    <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;pellet&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">}</span>
            <span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;lcdad_spectroscopy&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="s1">&#39;OntologyAnnotation(term=instrument)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Shimadzu DAD 400&#39;</span><span class="p">],</span>
            <span class="p">}),</span>
            <span class="p">(</span><span class="s1">&#39;raw_spectral_data_file&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">DATA_FILE</span><span class="p">,</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">}</span>
            <span class="p">])</span>
        <span class="p">])</span>


<span class="c1"># A NMR spectroscopy based metabolite profiling assay:</span>
<span class="n">nmr_assay_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;measurement_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;metabolite profiling&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;technology_type&#39;</span><span class="p">,</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;nmr spectroscopy&#39;</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;extraction&#39;</span><span class="p">,</span> <span class="p">{}),</span>
            <span class="p">(</span><span class="s1">&#39;extract&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
                    <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span>  <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;supernatant&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">EXTRACT</span><span class="p">,</span>
                    <span class="s1">&#39;characteristics_category&#39;</span><span class="p">:</span>  <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;extract type&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;characteristics_value&#39;</span><span class="p">:</span> <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;pellet&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">True</span>
                <span class="p">}</span>
            <span class="p">]),</span>
            <span class="p">(</span><span class="s1">&#39;nmr spectroscopy&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;instrument&#39;</span><span class="p">):</span> <span class="p">[</span><span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;Bruker AvanceII 1 GHz&#39;</span><span class="p">)],</span>
                <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;acquisition_mode&#39;</span><span class="p">):</span> <span class="p">[</span><span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;1D 13C NMR&#39;</span><span class="p">)],</span>
                <span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;pulse_sequence&#39;</span><span class="p">):</span> <span class="p">[</span><span class="n">OntologyAnnotation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="s1">&#39;CPMG&#39;</span><span class="p">)]</span>
            <span class="p">}),</span>
            <span class="p">(</span><span class="s1">&#39;raw_spectral_data_file&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;node_type&#39;</span><span class="p">:</span> <span class="n">DATA_FILE</span><span class="p">,</span>
                    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;technical_replicates&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s1">&#39;is_input_to_next_protocols&#39;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">}</span>
            <span class="p">])</span>
    <span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_treatment</span> <span class="o">=</span> <span class="n">Treatment</span><span class="p">(</span><span class="n">factor_values</span><span class="o">=</span><span class="p">(</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_0_VALUE</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_1_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_1_UNIT</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_2_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_2_UNIT</span><span class="p">)</span>
<span class="p">))</span>
<span class="n">second_treatment</span> <span class="o">=</span> <span class="n">Treatment</span><span class="p">(</span><span class="n">factor_values</span><span class="o">=</span><span class="p">(</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_0_VALUE_ALT</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_1_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_1_UNIT</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_2_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_2_UNIT</span><span class="p">)</span>
<span class="p">))</span>
<span class="n">third_treatment</span> <span class="o">=</span> <span class="n">Treatment</span><span class="p">(</span><span class="n">factor_values</span><span class="o">=</span><span class="p">(</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_0_VALUE_ALT</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_1_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_1_UNIT</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_2_VALUE_ALT</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_2_UNIT</span><span class="p">)</span>
<span class="p">))</span>
<span class="n">fourth_treatment</span> <span class="o">=</span> <span class="n">Treatment</span><span class="p">(</span><span class="n">factor_values</span><span class="o">=</span><span class="p">(</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_0_VALUE_THIRD</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_1_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_1_UNIT</span><span class="p">),</span>
    <span class="n">FactorValue</span><span class="p">(</span><span class="n">factor_name</span><span class="o">=</span><span class="n">BASE_FACTORS</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">FACTORS_2_VALUE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">FACTORS_2_UNIT</span><span class="p">)</span>
<span class="p">))</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">NonTreatment</span><span class="p">(</span><span class="n">element_type</span><span class="o">=</span><span class="n">SCREEN</span><span class="p">,</span> <span class="n">duration_value</span><span class="o">=</span><span class="n">SCREEN_DURATION_VALUE</span><span class="p">,</span> <span class="n">duration_unit</span><span class="o">=</span><span class="n">DURATION_UNIT</span><span class="p">)</span>
<span class="n">run_in</span> <span class="o">=</span> <span class="n">NonTreatment</span><span class="p">(</span><span class="n">element_type</span><span class="o">=</span><span class="n">RUN_IN</span><span class="p">,</span> <span class="n">duration_value</span><span class="o">=</span><span class="n">WASHOUT_DURATION_VALUE</span><span class="p">,</span> <span class="n">duration_unit</span><span class="o">=</span><span class="n">DURATION_UNIT</span><span class="p">)</span>
<span class="n">washout</span> <span class="o">=</span> <span class="n">NonTreatment</span><span class="p">(</span><span class="n">element_type</span><span class="o">=</span><span class="n">WASHOUT</span><span class="p">,</span> <span class="n">duration_value</span><span class="o">=</span><span class="n">WASHOUT_DURATION_VALUE</span><span class="p">,</span> <span class="n">duration_unit</span><span class="o">=</span><span class="n">DURATION_UNIT</span><span class="p">)</span>
<span class="n">follow_up</span> <span class="o">=</span> <span class="n">NonTreatment</span><span class="p">(</span><span class="n">element_type</span><span class="o">=</span><span class="n">FOLLOW_UP</span><span class="p">,</span> <span class="n">duration_value</span><span class="o">=</span><span class="n">FOLLOW_UP_DURATION_VALUE</span><span class="p">,</span> <span class="n">duration_unit</span><span class="o">=</span><span class="n">DURATION_UNIT</span><span class="p">)</span>
<span class="n">potential_concomitant_washout</span> <span class="o">=</span> <span class="n">NonTreatment</span><span class="p">(</span><span class="n">element_type</span><span class="o">=</span><span class="n">WASHOUT</span><span class="p">,</span> <span class="n">duration_value</span><span class="o">=</span><span class="n">FACTORS_2_VALUE</span><span class="p">,</span>
                                                          <span class="n">duration_unit</span><span class="o">=</span><span class="n">FACTORS_2_UNIT</span><span class="p">)</span>
<span class="n">cell_screen</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="n">SCREEN</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">screen</span><span class="p">,))</span>
<span class="n">cell_run_in</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="n">RUN_IN</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">run_in</span><span class="p">,))</span>
<span class="n">cell_other_run_in</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;OTHER RUN-IN&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">run_in</span><span class="p">,))</span>
<span class="n">cell_screen_and_run_in</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;SCREEN AND RUN-IN&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="n">screen</span><span class="p">,</span> <span class="n">run_in</span><span class="p">])</span>
<span class="n">cell_concomitant_treatments</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;CONCOMITANT TREATMENTS&#39;</span><span class="p">,</span>
                                                     <span class="n">elements</span><span class="o">=</span><span class="p">([{</span><span class="n">second_treatment</span><span class="p">,</span> <span class="n">fourth_treatment</span><span class="p">}]))</span>
<span class="n">cell_washout_00</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="n">WASHOUT</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">washout</span><span class="p">,))</span>
<span class="n">cell_washout_01</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;ANOTHER WASHOUT&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">washout</span><span class="p">,))</span>
<span class="n">cell_single_treatment_00</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;SINGLE TREATMENT FIRST&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="n">first_treatment</span><span class="p">])</span>
<span class="n">cell_single_treatment_01</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;SINGLE TREATMENT SECOND&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="n">second_treatment</span><span class="p">])</span>
<span class="n">cell_single_treatment_02</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;SINGLE TREATMENT THIRD&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="n">third_treatment</span><span class="p">])</span>
<span class="n">cell_multi_elements</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;MULTI ELEMENTS&#39;</span><span class="p">,</span>
                                             <span class="n">elements</span><span class="o">=</span><span class="p">[{</span><span class="n">first_treatment</span><span class="p">,</span> <span class="n">second_treatment</span><span class="p">,</span>
                                                        <span class="n">fourth_treatment</span><span class="p">},</span> <span class="n">washout</span><span class="p">,</span> <span class="n">second_treatment</span><span class="p">])</span>
<span class="n">cell_multi_elements_padded</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;MULTI ELEMENTS PADDED&#39;</span><span class="p">,</span>
                                                    <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="n">first_treatment</span><span class="p">,</span> <span class="n">washout</span><span class="p">,</span> <span class="p">{</span>
                                                        <span class="n">second_treatment</span><span class="p">,</span>
                                                        <span class="n">fourth_treatment</span>
                                                    <span class="p">},</span> <span class="n">washout</span><span class="p">,</span> <span class="n">third_treatment</span><span class="p">,</span> <span class="n">washout</span><span class="p">])</span>
<span class="n">cell_follow_up</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="n">FOLLOW_UP</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">follow_up</span><span class="p">,))</span>
<span class="n">cell_follow_up_01</span> <span class="o">=</span> <span class="n">StudyCell</span><span class="p">(</span><span class="s1">&#39;ANOTHER FOLLOW_UP&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">(</span><span class="n">follow_up</span><span class="p">,))</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QualityControl</span><span class="p">()</span>

<span class="n">ms_sample_assay_plan</span> <span class="o">=</span> <span class="n">SampleAndAssayPlan</span><span class="o">.</span><span class="n">from_sample_and_assay_plan_dict</span><span class="p">(</span><span class="s2">&quot;ms_sap&quot;</span><span class="p">,</span> <span class="n">sample_list</span><span class="p">,</span> <span class="n">ms_assay_dict</span><span class="p">)</span>
<span class="n">nmr_sample_assay_plan</span> <span class="o">=</span> <span class="n">SampleAndAssayPlan</span><span class="o">.</span><span class="n">from_sample_and_assay_plan_dict</span><span class="p">(</span><span class="s2">&quot;nmr_sap&quot;</span><span class="p">,</span> <span class="n">sample_list</span><span class="p">,</span> <span class="n">nmr_assay_dict</span><span class="p">)</span>

<span class="n">first_arm</span> <span class="o">=</span> <span class="n">StudyArm</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">TEST_STUDY_ARM_NAME_00</span><span class="p">,</span> <span class="n">group_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">arm_map</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="n">cell_screen</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="n">cell_run_in</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_single_treatment_00</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_follow_up</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">)</span>
<span class="p">]))</span>
<span class="n">second_arm</span> <span class="o">=</span> <span class="n">StudyArm</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">TEST_STUDY_ARM_NAME_01</span><span class="p">,</span> <span class="n">group_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">arm_map</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="n">cell_screen</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="n">cell_run_in</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_multi_elements</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_follow_up</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">)</span>
<span class="p">]))</span>
<span class="n">third_arm</span> <span class="o">=</span> <span class="n">StudyArm</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">TEST_STUDY_ARM_NAME_02</span><span class="p">,</span> <span class="n">group_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">arm_map</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="n">cell_screen</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="n">cell_run_in</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_multi_elements_padded</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_follow_up</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">)</span>
<span class="p">]))</span>
<span class="n">third_arm_no_run_in</span> <span class="o">=</span> <span class="n">StudyArm</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">TEST_STUDY_ARM_NAME_02</span><span class="p">,</span> <span class="n">group_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">arm_map</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="n">cell_screen</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_multi_elements_padded</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_follow_up</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">)</span>
<span class="p">]))</span>
<span class="n">arm_same_name_as_third</span> <span class="o">=</span> <span class="n">StudyArm</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">TEST_STUDY_ARM_NAME_02</span><span class="p">,</span> <span class="n">group_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">arm_map</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="n">cell_screen</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="n">cell_run_in</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_single_treatment_01</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_follow_up</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">)</span>
<span class="p">]))</span>
        <span class="c1"># Sample QC (for mass spectroscopy and other)</span>
<span class="n">pre_run_sample_type</span> <span class="o">=</span> <span class="n">ProductNode</span><span class="p">(</span>
    <span class="n">id_</span><span class="o">=</span><span class="s1">&#39;pre/00&#39;</span><span class="p">,</span> <span class="n">node_type</span><span class="o">=</span><span class="n">SAMPLE</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">=</span><span class="p">(</span>
        <span class="n">Characteristic</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;dilution&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;mg/L&#39;</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">post_run_sample_type</span> <span class="o">=</span> <span class="n">ProductNode</span><span class="p">(</span>
    <span class="n">id_</span><span class="o">=</span><span class="s1">&#39;post/00&#39;</span><span class="p">,</span> <span class="n">node_type</span><span class="o">=</span><span class="n">SAMPLE</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ethanol&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">=</span><span class="p">(</span>
        <span class="n">Characteristic</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;dilution&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;mg/L&#39;</span><span class="p">),</span>
        <span class="n">Characteristic</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;dilution&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;mg/L&#39;</span><span class="p">),</span>
        <span class="n">Characteristic</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;dilution&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;mg/L&#39;</span><span class="p">),</span>
        <span class="n">Characteristic</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;dilution&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;mg/L&#39;</span><span class="p">),</span>
        <span class="n">Characteristic</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;dilution&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;mg/L&#39;</span><span class="p">)</span>
    <span class="p">))</span>
<span class="n">dummy_sample_type</span> <span class="o">=</span> <span class="n">ProductNode</span><span class="p">(</span><span class="n">id_</span><span class="o">=</span><span class="s1">&#39;dummy/01&#39;</span><span class="p">,</span> <span class="n">node_type</span><span class="o">=</span><span class="n">SAMPLE</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
<span class="n">more_dummy_sample_type</span> <span class="o">=</span> <span class="n">ProductNode</span><span class="p">(</span><span class="n">id_</span><span class="o">=</span><span class="s1">&#39;dummy/02&#39;</span><span class="p">,</span> <span class="n">node_type</span><span class="o">=</span><span class="n">SAMPLE</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;more dummy&#39;</span><span class="p">)</span>
<span class="n">interspersed_sample_types</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dummy_sample_type</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QualityControl</span><span class="p">(</span>
    <span class="n">interspersed_sample_type</span><span class="o">=</span><span class="n">interspersed_sample_types</span><span class="p">,</span>
    <span class="n">pre_run_sample_type</span><span class="o">=</span><span class="n">pre_run_sample_type</span><span class="p">,</span>
    <span class="n">post_run_sample_type</span><span class="o">=</span><span class="n">post_run_sample_type</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">single_arm</span> <span class="o">=</span> <span class="n">StudyArm</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">TEST_STUDY_ARM_NAME_00</span><span class="p">,</span> <span class="n">group_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">arm_map</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="n">cell_screen</span><span class="p">,</span> <span class="n">ms_sample_assay_plan</span><span class="p">),</span> <span class="p">(</span><span class="n">cell_run_in</span><span class="p">,</span><span class="n">ms_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_single_treatment_00</span><span class="p">,</span> <span class="n">nmr_sample_assay_plan</span><span class="p">),</span>
    <span class="p">(</span><span class="n">cell_follow_up</span><span class="p">,</span> <span class="n">nmr_sample_assay_plan</span><span class="p">)</span>
<span class="p">]))</span>
<span class="n">study_design</span> <span class="o">=</span> <span class="n">StudyDesign</span><span class="p">(</span><span class="n">study_arms</span><span class="o">=</span><span class="p">(</span><span class="n">single_arm</span><span class="p">,))</span>
<span class="n">study</span> <span class="o">=</span> <span class="n">study_design</span><span class="o">.</span><span class="n">generate_isa_study</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">study</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">treatment_assay</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">study</span><span class="o">.</span><span class="n">assays</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">treatment_assay</span><span class="o">.</span><span class="n">graph</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="n">process</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">prev_process</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">next_process</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span> <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="n">treatment_assay</span><span class="o">.</span><span class="n">process_sequence</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a_graph</span> <span class="o">=</span> <span class="n">treatment_assay</span><span class="o">.</span><span class="n">graph</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">a_graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isa_investigation</span> <span class="o">=</span> <span class="n">Investigation</span><span class="p">(</span><span class="n">studies</span><span class="o">=</span><span class="p">[</span><span class="n">study</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isa_tables</span> <span class="o">=</span> <span class="n">dumpdf</span><span class="p">(</span><span class="n">isa_investigation</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">study</span><span class="o">.</span><span class="n">assays</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">()]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">))</span><span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">treatment_assay</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="p">()]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">isatools.model</span> <span class="kn">import</span> <span class="n">_build_assay_graph</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gph</span> <span class="o">=</span> <span class="n">_build_assay_graph</span><span class="p">(</span><span class="n">treatment_assay</span><span class="o">.</span><span class="n">process_sequence</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">isa_tables</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isa_tables</span><span class="p">[</span><span class="s1">&#39;s_study_01.txt&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isa_tables</span><span class="p">[</span><span class="s1">&#39;a_AT0_metabolite-profiling_nmr-spectroscopy.txt&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isa_tables</span><span class="p">[</span><span class="s1">&#39;a_AT0_metabolite-profiling_mass-spectrometry.txt&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">final_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;notebook-output&#39;</span><span class="p">,</span> <span class="s1">&#39;sd-test&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isa_j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">isa_investigation</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">ISAJSONEncoder</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">))</span>
<span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_dir</span><span class="p">,</span><span class="s2">&quot;isa_as_json_from_dumps2.json&quot;</span><span class="p">),</span><span class="s2">&quot;w&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">isa_j</span><span class="p">)</span> <span class="c1"># this call write the string &#39;isa_j&#39; to the file called &#39;isa_as_json_from_dumps.json&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">isatab</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">isa_obj</span><span class="o">=</span><span class="n">isa_investigation</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">final_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">final_dir</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">final_dir</span><span class="p">,</span><span class="s1">&#39;i_investigation.txt&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">isa</span><span class="p">:</span>
    <span class="n">validation_report</span><span class="o">=</span><span class="n">isatab</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">isa</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">validation_report</span><span class="p">[</span><span class="s2">&quot;errors&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion:<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="about-this-notebook">
<h2>About this notebook<a class="headerlink" href="#about-this-notebook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>authors: philippe.rocca-serra&#64;oerc.ox.ac.uk, massimiliano.izzo&#64;oerc.ox.ac.uk</p></li>
<li><p>license: CC-BY 4.0</p></li>
<li><p>support: isatools&#64;googlegroups.com</p></li>
<li><p>issue tracker: https://github.com/ISA-tools/isa-api/issues</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "isa-api-py38"
        },
        kernelOptions: {
            kernelName: "isa-api-py38",
            path: "./content/notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'isa-api-py38'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="light-sensitity-study-repeated-treatment-design.html" title="previous page">Light Sensitivity Experiment:</a>
    <a class='right-next' id="next-link" href="investigation-from-datascriptor-config-observational-variables-and-ontology-annotation.html" title="next page">Create ISA-API Investigation from Datascriptor Study Design configuration</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The ISA Team<br/>
        
            &copy; Copyright 2021 (CC-BY 4.0).<br/>
          <div class="extra_footer">
            <script>mermaid.init();</script> <div class="row_footer"> This page was created thanks to work by <a href="https://github.com/jupyter/jupyter-book/graphs/contributors">The Jupyter Book Community</a></div> <div class="row_footer"> This project is supported financially by the <a href="https://wellcome.org/">Welcome Trust</a>, Elixir-UK and the European Union</div>
<div class="row_footer"> <div class="column" style="center"><a href="https://wellcome.org/"><img src="../_static/images/logo/wellcome-logo-black.png" height="25" alt="Wellcome" style="float:center""></a></div> <div class="column"><a href="https://www.elixir-uk.org.eu/"><img src="../_static/images/logo/elixir-uk_transparent.png" height="40" alt="IMI logo" style="float:center""></a></div> <div class="column"><a href="https://https://ec.europa.eu/programmes/horizon2020/en"><img src="../_static/images/logo/eu-flag-recolored.png" height="25" alt="EFPIA logo" style="float:center""></a></div> </div>
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>